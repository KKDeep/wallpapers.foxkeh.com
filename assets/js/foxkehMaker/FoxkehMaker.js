
function FoxkehMaker(_profile){if(0===0){var profile=(typeof _profile=="object")?_profile:{};this.type=profile.type;this.baseURL=location.protocol+"//"+location.hostname+"/";this.assetsFilePath=(typeof profile.assetsFilePath=="string")?profile.assetsFilePath:"";this.svgCache={};this.parts=new Array();for(var i=0,l=profile.parts.length;i<l;i++){var parentElement=document.createElementNS("http://www.w3.org/2000/svg","g");var partsName=profile.parts[i].name;var foxkehmakerPartsClass=window[profile.parts[i].className];this.parts[partsName]=new foxkehmakerPartsClass();this.parts[partsName].init(this.type,profile.parts[i],parentElement);}}}
FoxkehMaker.prototype.loadPresets=function(url){this.clearParts();var that=this;$.get(url,function(json){var preset=json;for(var item in that.parts){var partsName=that.parts[item].name;that.parts[item].loadParts(that.assetsFilePath,preset[partsName]);}},"json");}
FoxkehMaker.prototype.clearParts=function(){for(var item in this.parts){var parts=this.parts[item];parts.clear();}}
function FoxkehMakerParts(){}
FoxkehMakerParts.ON_LOADED="on_loaded";FoxkehMakerParts.ON_INIT="on_init";FoxkehMakerParts.ON_ACTIVE="on_active";FoxkehMakerParts.ON_UNACTIVE="on_unactive";FoxkehMakerParts.prototype.init=function(type,profile,parentElement){this.type=type;this.profile=profile;this.profile.active=(typeof this.profile.active=="boolean")?this.profile.active:true;this.name=profile.name;this.parentElement=parentElement;this.SVGRequest="";this.SVGFilePath="";}
FoxkehMakerParts.prototype.loadParts=function(assetsFilePath,paramObj){var that=this;var url=paramObj.svgFilePath;if(this.name=="frame"&&navigator.userAgent.match("Mac OS X")){url=paramObj.osxSvgFilePath;}
url=assetsFilePath+url;var callback=function(xml){that.setPreset(url,xml,paramObj);};this.loadSVG(url,callback);}
FoxkehMakerParts.prototype.loadSVG=function(url,callback){if(this.SVGRequest!=""){this.SVGRequest.abort();}
var callback=(typeof callback=="function")?callback:function(xml){};this.SVGRequest=$.get(url,callback,"xml");}
FoxkehMakerParts.prototype.setPreset=function(url,xml,preset){if(typeof this.svgSprite!="undefined"){this.svgSprite="";}
this.svgDocument=xml;this.initParts(preset);}
FoxkehMakerParts.prototype.clear=function(){if(typeof this.svgSprite=="object"){var svgElement=this.svgSprite.svgElement;if(svgElement.parentNode)svgElement.parentNode.removeChild(svgElement);}}
FoxkehMakerParts.prototype.__defineSetter__("svgDocument",function(svgDocument){this._svgDocument=svgDocument;this.setSVGDocument(svgDocument);});FoxkehMakerParts.prototype.__defineGetter__("svgDocument",function(){return this._svgDocument;});FoxkehMakerParts.prototype.setSVGDocument=function(svgDocument){var that=this;var svg;if(typeof svgDocument=="object"&&svgDocument.namespaceURI=="http://www.w3.org/2000/svg"){svg=svgDocument;}else{svg=this.svgDocument.getElementById("layer1");svg.setAttribute("id","");}
if(typeof this.svg=="object"){delete this.svg;}
this.svg=document.importNode(svg,true);if(typeof this.svgSprite!="object"){this.parentElement.appendChild(this.svg);this.svgSprite=new SVGSprite.Sprite(this.svg);}else{var _cx=this.x+(this.svgSprite.width/2);var _cy=this.y+(this.svgSprite.height/2);var _scale=this.scale;var _alpha=this.alpha;var _frameVisible=this.frameVisible;var _parentNode=this.parentElement;delete this.svgSprite;var _children=_parentNode.childNodes;for(var i=0,l=_children.length;i<l;i++){_parentNode.removeChild(_children[i]);}
_parentNode.appendChild(this.svg);this.svgSprite=new SVGSprite.Sprite(this.svg);this.scale=_scale;this.x=_cx-(this.svgSprite.width/2);this.y=_cy-(this.svgSprite.height/2);this.alpha=_alpha;this.frameVisible=_frameVisible;}
if(this.profile.drag){this.svgSprite.addEventListener('mousedown',function(){var bounds=(typeof that.profile.bounds=='object')?that.profile.bounds:null;if(that.profile.bounds=="viewBox"){var viewBox=that.svgSprite._svgElement.nearestViewportElement.viewBox.baseVal;var x=Math.min(viewBox.x,viewBox.width-that.svgSprite.width);var y=Math.min(viewBox.y,viewBox.height-that.svgSprite.height);var left=Math.max(viewBox.width,that.svgSprite.width);var bottom=Math.max(viewBox.height,that.svgSprite.height);var width=left-x;var height=bottom-y;bounds={"x":x,"y":y,"width":width,"height":height};}
that.svgSprite.startDrag(false,bounds);window.addEventListener('mouseup',function(){that.svgSprite.stopDrag()},true);},true);this.svgSprite.buttonMode=true;}
this.defs=new Array();var _defs=this.svgDocument.getElementsByTagName("defs");for(var i=0,l=_defs.length;i<l;i++){var def=document.importNode(_defs[i],true);this.defs.push(def);}
var foxkehDefs=this.parentElement.ownerSVGElement.getElementsByTagName("defs")[0];var defs=this.defs;for(var i=0,l=defs.length;i<l;i++){while(defs[i].childNodes.length){foxkehDefs.appendChild(defs[i].childNodes[0]);}}
$(this).trigger(FoxkehMakerParts.ON_LOADED);}
FoxkehMakerParts.prototype.initParts=function(preset){var preset=(typeof preset=="object")?preset:{};var viewBoxWidth=this.svg.nearestViewportElement.getAttribute("viewBox").split(" ")[2];var viewBoxHeight=this.svg.nearestViewportElement.getAttribute("viewBox").split(" ")[3];var _scale=(typeof preset.scale=="number")?preset.scale:1;if(typeof this.profile.size=="string"&&this.profile.size=="fit"){if(this.svgSprite.width/this.svgSprite.height>viewBoxWidth/viewBoxHeight){_scale=viewBoxHeight/this.svgSprite.height;}else{_scale=viewBoxWidth/this.svgSprite.width;}}
this.scale=_scale;var _x=(viewBoxWidth-this.svgSprite.width)/2;if(typeof preset.left=="number"){_x=preset.left-(this.svgSprite.width/2);}
if(typeof preset.right=="number"){_x=(viewBoxWidth-preset.right)-(this.svgSprite.width/2);}
if(typeof this.profile.size=="string"&&this.profile.size=="fit"){_x=viewBoxWidth-this.svgSprite.width;}
if(this.profile.name=="bg"&&this.type=="personas"){_x=viewBoxWidth-this.svgSprite.width;}
this.x=_x;var _y=(viewBoxHeight-this.svgSprite.height)/2
if(typeof this.profile.size=="string"&&this.profile.size=="fit"){_y=viewBoxHeight-this.svgSprite.height;}
if(typeof preset.top=="number"){_y=preset.top-(this.svgSprite.height/2);}
if(typeof preset.bottom=="number"){_y=(viewBoxHeight-preset.bottom)-(this.svgSprite.height/2);}
if(typeof this.profile.size=="string"&&this.profile.size=="fit"){_y=viewBoxHeight-this.svgSprite.height;}
if(this.profile.name=="bg"&&this.type=="personas"){_y=23;}
this.y=_y;this.alpha=1;this.frameVisible=false;this.active=false;$(this).trigger(FoxkehMakerParts.ON_INIT);}
FoxkehMakerParts.prototype.__defineSetter__("scale",function(scale){var _frameVisible=this.frameVisible;if(_frameVisible){this.frameVisible=false;}
this._scale=scale;this.svgSprite.scaleX=this.svgSprite.scaleY=this._scale;if(_frameVisible){this.frameVisible=true;}});FoxkehMakerParts.prototype.__defineGetter__("scale",function(){return this._scale;});FoxkehMakerParts.prototype.__defineSetter__("x",function(x){this.svgSprite.x=x;});FoxkehMakerParts.prototype.__defineGetter__("x",function(){return this.svgSprite.x;});FoxkehMakerParts.prototype.__defineSetter__("y",function(y){this.svgSprite.y=y;});FoxkehMakerParts.prototype.__defineGetter__("y",function(){return this.svgSprite.y;});FoxkehMakerParts.prototype.__defineSetter__("alpha",function(alpha){this.svgSprite.alpha=alpha;});FoxkehMakerParts.prototype.__defineGetter__("alpha",function(){return this.svgSprite.alpha;});FoxkehMakerParts.prototype.__defineSetter__("active",function(active){if(this.profile.active){this._active=Boolean(active);if(this._active){$(this).trigger(FoxkehMakerParts.ON_ACTIVE);}else{$(this).trigger(FoxkehMakerParts.ON_UNACTIVE);}}else{this._active=false;}});FoxkehMakerParts.prototype.__defineGetter__("active",function(){return this._active;});FoxkehMakerParts.prototype.__defineSetter__("frameVisible",function(frameVisible){if(typeof this.svgSprite=="undefined"){return;}
if(frameVisible){this.svgSprite.showFrame();this._frameVisible=true;}else{this.svgSprite.hideFrame();this._frameVisible=false;}});FoxkehMakerParts.prototype.__defineGetter__("frameVisible",function(){return this._frameVisible;});function FoxkehMakerBGParts(){}
FoxkehMakerBGParts.prototype=new FoxkehMakerParts();FoxkehMakerBGParts.prototype.__defineSetter__("frameVisible",function(frameVisible){var owner=this.parentElement.ownerSVGElement;if(typeof this.frame=="undefined"){var viewBox=owner.viewBox.baseVal;var strokeWidth=viewBox.width/owner.getAttribute("width")*10;this.frame=document.createElementNS("http://www.w3.org/2000/svg","rect");this.frame.setAttribute("x",viewBox.x);this.frame.setAttribute("y",viewBox.y);this.frame.setAttribute("width",viewBox.width);this.frame.setAttribute("height",viewBox.height);this.frame.setAttribute("style","fill:none; stroke:#FFFFFF; stroke-width:"+strokeWidth+"; stroke-opacity:0.6");}
if(frameVisible){owner.appendChild(this.frame);this._frameVisible=true;}else{if(this.frame.parentNode){this.frame.parentNode.removeChild(this.frame);}
this._frameVisible=false;}});FoxkehMakerBGParts.prototype.__defineGetter__("frameVisible",function(){return this._frameVisible;});function FoxkehMakerView(foxkehMaker){}
FoxkehMakerView.prototype.init=function(){if(foxkehMaker instanceof FoxkehMaker){this.foxkehMaker=foxkehMaker;}else{throw new Error("foxkehMaker is not FoxkehMaker Object.");return;}
this.initUI();var that=this;for(i in this.foxkehMaker.parts){var parts=this.foxkehMaker.parts[i];$(parts).bind(FoxkehMakerParts.ON_LOADED,function(e){that.initParts(e.currentTarget);});$(parts).bind(FoxkehMakerParts.ON_ACTIVE,function(e){that.showFrame(e.currentTarget);$('#mainContents #customizeController #tabs').accordion('option','active',that.tabIndex[e.currentTarget.name]);});$(parts).bind(FoxkehMakerParts.ON_UNACTIVE,function(e){e.currentTarget.frameVisible=false;});}}
FoxkehMakerView.prototype.initViewport=function(width,height){this.width=width;this.height=height;var viewer=document.getElementById("viewer");var viewBoxWidth=1875;var viewBoxHeight=1000;var aspect=height/width;var viewerWidth=$(viewer).width();var viewerHeight=$(viewer).height();if(aspect<1){$(viewer).height(viewerWidth*aspect);}else{$(viewer).width(viewerHeight/aspect);}
if(this.foxkehMaker.type=="personas"){viewBoxWidth=this.width;viewBoxHeight=this.height;}else if(aspect>viewBoxHeight/viewBoxWidth){viewBoxWidth=viewBoxHeight/aspect;}else{viewBoxHeight=viewBoxWidth*aspect;}
this.viewport=document.createElementNS("http://www.w3.org/2000/svg","svg");this.viewport.setAttribute("id","foxkehViewport");this.viewport.setAttribute("width",$(viewer).width());this.viewport.setAttribute("height",$(viewer).height());this.viewport.setAttribute("viewBox","0 0 "+viewBoxWidth+" "+viewBoxHeight);var defs=document.createElementNS("http://www.w3.org/2000/svg","defs");defs.setAttribute("id","foxkehDefs");this.viewport.appendChild(defs);var canvas=document.createElementNS("http://www.w3.org/2000/svg","rect");canvas.setAttribute("id","foxkhMakerCanvas");canvas.setAttribute("x",0);canvas.setAttribute("y",0);canvas.setAttribute("width",viewBoxWidth);canvas.setAttribute("height",viewBoxHeight);canvas.setAttribute("style","opacity:0");if(this.foxkehMaker.type=="personas"){canvas.setAttribute("style","opacity:1; fill: #9B9B9B;");}
this.viewport.appendChild(canvas);this.canvas=canvas;viewer.appendChild(this.viewport);$("#customizeViewer .size .width").html(width);$("#customizeViewer .size .height").html(height);for(var item in this.foxkehMaker.parts){var parts=foxkehMaker.parts[item];this.viewport.appendChild(parts.parentElement);}}
FoxkehMakerView.prototype.initParts=function(parts){var that=this;parts.svgSprite.addEventListener("mousedown",function(){parts.active=true;});}
FoxkehMakerView.prototype.showFrame=function(parts){this.unactiveAll();parts.frameVisible=true;}
FoxkehMakerView.prototype.unactiveAll=function(){for(i in this.foxkehMaker.parts){this.foxkehMaker.parts[i].active=false;}}
FoxkehMakerView.prototype.initUI=function(){var that=this;var buttons={};var dialogWidth=(that.foxkehMaker.type=="mobile")?570:630;$("#dialog").dialog({autoOpen:false,width:dialogWidth,closeText:"close",modal:true,resizable:false});this.loadedText=$($("#dialog h3")[0]).html();$("#dialog .description .close").click(function(){$("#dialog").dialog("close");});$("#dialog .exit").click(function(){$("#dialog .section").slideUp(1000,function(){$("#dialog .thanks").css({opacity:0}).show().animate({opacity:1},1000);});$("#dialog").parent().find(".ui-dialog-titlebar-close").hide();return false;})
$("#form_sendImage").attr("disabled","disabled").click(function(){$("#form_sendImage").attr("disabled","disabled");$("#error").slideUp(200);var lang=$("#form_lang").val();var fileName=$("#form_filename").val();var mailaddress=$("#form_mailaddress").val();if(mailaddress==""||mailaddress.match(/^([a-z0-9_]|\-|\.|\+)+@(([a-z0-9_]|\-)+\.)+[a-z]{2,6}$/i)==null){$("#form_sendImage").removeAttr("disabled");$("#error").slideDown(500);return false;}
var data={"mail":mailaddress,"filename":fileName,"lang":lang}
$.post(that.foxkehMaker.assetsFilePath+"/assets/php/sendmail.php",data,function(data,status){if(status=="success"&&data.result=="1"){}else{$("#dialog .thanks").html("<p>System error.<br />"+data.text+"</p>");}
$("#dialog .exit").trigger("click");},"json");return false;});$("#download").click(function(){that.unactiveAll();var _width,_height;if(that.width>that.height){_width=(that.width<600)?that.width:600;_height=_width*(that.height/that.width);}else{_height=(that.height<320)?that.height:320;_width=_height*(that.width/that.height);}
$($("#preview").parent()[0]).css({width:_width,height:_height});$("#preview").attr("src","").css({width:_width,height:_height,opacity:0});var svgNode=document.getElementById("foxkehViewport");var svgSrc=(new XMLSerializer).serializeToString(svgNode);var personasSVGSrc="";if(that.foxkehMaker.type=="personas"){var frameAlpha=that.foxkehMaker.parts.frame.alpha;that.foxkehMaker.parts.frame.alpha=0;var viewportViewport=that.viewport.getAttribute("viewBox");var viewBoxWidth=that.viewport.getAttribute("width");var viewBoxHeight=that.viewport.getAttribute("height");that.viewport.setAttribute("viewBox",-(3000-that.width)+" 24 3000 1600");that.viewport.setAttribute("width",3000);that.viewport.setAttribute("height",1600);personasSVGSrc=$("#viewer").html();that.foxkehMaker.parts.frame.alpha=frameAlpha;that.viewport.setAttribute("viewBox",viewportViewport);that.viewport.setAttribute("width",viewBoxWidth);that.viewport.setAttribute("height",viewBoxHeight);}
var postWidth=(that.foxkehMaker.type=="personas")?_width:that.width;var postHeight=(that.foxkehMaker.type=="personas")?_height:that.height;var data={"svg":svgSrc,"personasSVG":personasSVGSrc,"width":postWidth,"height":postHeight,"type":that.foxkehMaker.type}
$($("#dialog h3")[0]).html("<img src='"+that.foxkehMaker.assetsFilePath+"/assets/images/site/ajax-loader.gif' /> Loading...");$("#dialog").dialog("open");$("#dialog .description").hide();$("#form_filename").val("");$.post(that.foxkehMaker.assetsFilePath+"/assets/php/convert.php",data,function(data,status){if(status=="success"&&data.result==0){var extension=(that.foxkehMaker.type=="mobile")?".jpg":".png";var src=that.foxkehMaker.baseURL+"/tmp/"+data.md5+extension;var img=new Image();img.src=src;img.onload=function(){$("#preview").attr("src",src).animate({opacity:1},1000);$($("#dialog h3")[0]).html(that.loadedText);$("#dialog .description .download").attr("href",src);$("#dialog .description").slideDown(1000);$("#form_filename").val(data.md5);$("#form_sendImage").removeAttr("disabled");if(that.foxkehMaker.type=="personas"){var _accentcolor=that.foxkehMaker.parts.frame.accentcolor;var _textcolor=that.foxkehMaker.parts.frame.textcolor;var _date=new Date();var _persona={id:"foxkehMaker_"+data.md5,name:"foxkehMaker ("+_date.getFullYear()+"/"+_date.getMonth()+"/"+_date.getDate()+" "+_date.getHours()+":"+_date.getMinutes()+":"+_date.getSeconds()+")",author:"FoxkehMaker",headerURL:that.foxkehMaker.baseURL+"/personas/"+data.personasSplitPath+"_header.png",footerURL:that.foxkehMaker.baseURL+"/personas/"+data.personasSplitPath+"_footer.png",accentcolor:_accentcolor,textcolor:_textcolor,previewURL:that.foxkehMaker.baseURL+"/personas/"+data.personasSplitPath+"_preview.png",iconURL:that.foxkehMaker.baseURL+"/personas/"+data.personasSplitPath+"_icon.png"}
$("#setPersonas").attr("data-browsertheme",JSON.stringify(_persona)).click(function(){var event=document.createEvent("Events");event.initEvent("InstallBrowserTheme",true,false);this.dispatchEvent(event);return false;}).hover(function(){var event=document.createEvent("Events");event.initEvent("PreviewBrowserTheme",true,false);this.dispatchEvent(event);},function(){var event=document.createEvent("Events");event.initEvent("ResetBrowserThemePreview",true,false);this.dispatchEvent(event);});}}}else{$($("#dialog h3")[0]).html("System error. Please Reload.");}});});$('#mainContents #customizeController #tabs').accordion().bind("accordionchange",function(e,ui){var partsName=ui.newHeader.attr("id").replace("Tab","");var thumLists=$(ui.newContent[0]).find(".thumList");if(thumLists.length>0){var _height=ui.newContent[0].offsetHeight-thumLists[0].offsetTop;$(thumLists[0]).height(_height);}
if(typeof that.foxkehMaker.parts[partsName]=="object"){that.showFrame(that.foxkehMaker.parts[partsName]);}else{that.unactiveAll();}});$(".thumList").each(function(){var parentNode=$(this).parent()[0];var _height=parentNode.offsetHeight-this.offsetTop;$(this).height(_height-35);});this.tabIndex={};$('#mainContents #customizeController #tabs h3').each(function(i){var partsName=this.id.replace("Tab","");that.tabIndex[partsName]=i;});var presetUrl=this.foxkehMaker.assetsFilePath+"json/presets/"+this.foxkehMaker.type+"_preset.json";$.get(presetUrl,function(json){that.initPartsList(json);that.foxkehMaker.loadPresets(json.list[0].presetFile);},"json");for(i in this.foxkehMaker.parts){var part=this.foxkehMaker.parts[i].profile;if(part.change){var jsonUrl=this.foxkehMaker.assetsFilePath+part.changeList;var partsListName=part.name;$.get(jsonUrl,function(json){that.initPartsList(json);},"json");}
if(part.scale){$.data($('#'+part.name+'ScaleSlider').get(0),"partsProfile",part);$('#'+part.name+'ScaleSlider').slider({disabled:true,max:100,min:0,value:50,range:"min",slide:function(event,ui){var profile=$.data(event.target,"partsProfile");var partsName=profile.name;var _scale=profile.scaleMin+(profile.scaleMax-profile.scaleMin)*(ui.value/100);that.foxkehMaker.parts[partsName].scale=_scale;}});}
if(part.alpha){$.data($('#'+part.name+'AlphaSlider').get(0),"partsProfile",part);$('#'+part.name+'AlphaSlider').slider({disabled:true,max:100,min:0,value:100,range:"min",slide:function(event,ui){var profile=$.data(event.target,"partsProfile");var partsName=profile.name;var _alpha=profile.alphaMin+(profile.alphaMax-profile.alphaMin)*(ui.value/100);that.foxkehMaker.parts[partsName].alpha=_alpha;}}).css({opacity:0.2});}
$(this.foxkehMaker.parts[i]).bind(FoxkehMakerParts.ON_INIT,function(e){that.initSlider(e.currentTarget);});}}
FoxkehMakerView.prototype.initPartsList=function(partsList){var html=new Array();for(var index in partsList.list){var _list=partsList.list[index];var _url=(typeof _list.presetFile=="string")?this.foxkehMaker.assetsFilePath+_list.presetFile:this.foxkehMaker.assetsFilePath+_list.svgFilePath;var _rel=(typeof _list.calSVGFilePath=="string")?this.foxkehMaker.assetsFilePath+_list.calSVGFilePath:"";html.push("<li><a href='"+_url+"' rel='"+_rel+"' colors='"+_list.accentcolor+","+_list.textcolor+"'><img src='"+this.foxkehMaker.assetsFilePath+_list.thumbnail+"' alt='' /></a></li>");}
var partsName=partsList.name;var that=this;$("#"+partsName+"List").html(html.join(''));$("#"+partsName+"List li a").click(function(){if(partsName=="preset"){that.foxkehMaker.loadPresets(this.href);}else{var callback=function(xml){that.foxkehMaker.parts[partsName].svgDocument=xml;}
that.foxkehMaker.parts[partsName].loadSVG(this.href,callback)
if(that.foxkehMaker.type=="pc"&&partsName=="bg"){$.get(this.rel,function(xml){that.foxkehMaker.parts["cal"].svgDocument=xml;},"xml");}
if(that.foxkehMaker.type=="personas"&&partsName=="bg"){var colors=this.getAttribute('colors').split(",");that.foxkehMaker.parts["frame"].accentcolor=colors[0];that.foxkehMaker.parts["frame"].textcolor=colors[1];}}
return false;})}
FoxkehMakerView.prototype.initSlider=function(foxkehMakerParts){var profile=foxkehMakerParts.profile;if(profile.scale){var scaleValue=((foxkehMakerParts.scale-profile.scaleMin)/(profile.scaleMax-profile.scaleMin))*100;var scaleSlider=$('#'+profile.name+'ScaleSlider');scaleSlider.slider('option','disabled',false).slider('option','value',scaleValue).css({opacity:1});}
if(profile.alpha){var alphaValue=((foxkehMakerParts.alpha-profile.alphaMin)/(profile.alphaMax-profile.alphaMin))*100;var scaleSlider=$('#'+profile.name+'AlphaSlider');scaleSlider.slider('option','disabled',false).slider('option','value',alphaValue).css({opacity:1});}}
function FoxkehMakerController(foxkehMakerView){if(foxkehMakerView instanceof FoxkehMakerView){this.foxkehMakerView=foxkehMakerView;}else{throw new Error("foxkehMaker is not FoxkehMaker Object.");return;}
this.foxkehMaker=this.foxkehMakerView.foxkehMaker;}
SVGSprite.Sprite.prototype.showFrame=function(){if(typeof this._frame=='undefined'){this._frame=document.createElementNS("http://www.w3.org/2000/svg",this._prefix+"g");var _frameMainRect=document.createElementNS("http://www.w3.org/2000/svg",this._prefix+"rect");var _frameShadowRect=document.createElementNS("http://www.w3.org/2000/svg",this._prefix+"rect");_frameMainRect.setAttributeNS(this._prefix,"style","fill: #FFFFFF; opacity: .6; stroke: #FFFFFF; stroke-width: 20px;");_frameMainRect.setAttributeNS(this._prefix,"stroke-linejoin","round");_frameShadowRect=_frameMainRect.cloneNode(true);_frameShadowRect.setAttributeNS(this._prefix,"filter","url(#frameBlur)");_frameShadowRect.setAttributeNS(this._prefix,"style","fill: #FFCC00; opacity: .3; stroke: #FFCC00; stroke-width: 20px;");var _width=this.width+6;var _height=this.height+6;var _x=this.svgElement.getBBox().x;var _y=this.svgElement.getBBox().y;_frameMainRect.setAttributeNS(this._prefix,"x",_x);_frameMainRect.setAttributeNS(this._prefix,"y",_y);_frameMainRect.setAttributeNS(this._prefix,"width",_width);_frameMainRect.setAttributeNS(this._prefix,"height",_height);_frameShadowRect.setAttributeNS(this._prefix,"x",_x);_frameShadowRect.setAttributeNS(this._prefix,"y",_y);_frameShadowRect.setAttributeNS(this._prefix,"width",_width);_frameShadowRect.setAttributeNS(this._prefix,"height",_height);this._frame.appendChild(_frameMainRect);this._alphaSVGElement.parentNode.appendChild(this._frame);this._alphaSVGElement.parentNode.appendChild(this._alphaSVGElement);}}
SVGSprite.Sprite.prototype.hideFrame=function(){if(typeof this._frame!='undefined'){this._alphaSVGElement.parentNode.removeChild(this._frame);delete this._frame;}}